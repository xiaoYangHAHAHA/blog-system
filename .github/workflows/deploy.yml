name: Blog CI/CD

on:
  push:
    barches:
      - master

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      # 切代码到 runner
      - uses: actions/checkout@v1
      - name: use Node.js 14.x
        uses: actions/setup-node@v1
        with:
          node-version: 14.x
      
      - name: Install dependencies
        run: npm install

      - name: Build
        run: npm run build --if-present
        
      - name: deploy to server
        uses: garygrossgarten/github-action-scp@release
        with:
          local: nebula-website
          remote: /home/vesoft/nebula-website
          # 涉及偏安全隐私的信息，不要明文暴露在此文件中，因为repo很可能是公开的，会被所有人看见
          # ${{ ... }} 会应用你在对应项目设置中，配置的对应serets的键值信息，从而保护私密信息不被看到
          host: ${{ secrets.HOST }}
          username: vesoft
          password: ${{ secrets.PASSWORD }}
          concurrency: 20

    
